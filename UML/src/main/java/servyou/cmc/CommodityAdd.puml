@startuml
'https://plantuml.com/activity-diagram-beta
skinparam Activity {
	BorderColor Black
	BackgroundColor PHYSICAL
}


start
:校验关联的类目是否可用，类目停用则报错;
if(是否传入商品版本信息) then(存在)
partition 商品版本校验 {
:校验关联的平台产品是否可售（已上架且为销售);
if(存在数量属性？) then(存在)
:校验属性是否被停用;
note left:仅功能服务不存在数量属性
endif
}
else(不存在)
#red:保存失败,商品至少需要一个版本;
end
endif
:保存商品信息,商品状态为待上架，生成商品编码和历史版本;
:批量保存类目项，业务约束项;
partition 遍历商品版本列表 {
:保存商品版本信息，生成商品版本编码和历史版本;
:批量保存平台产品列表，销售规则;
partition 遍历定价策略列表 {
:保存定价策略;
:批量保存定价策略内容列表，定价策略id = 定价策略主键;
}
}
stop

@enduml
